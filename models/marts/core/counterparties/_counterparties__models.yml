version: 2

models:
  - name: dim_counterparties
    description: "Canonical counterparty dimension - external parties in transactions and facilities"
    columns:
      - name: counterparty_id
        description: "Unique counterparty identifier - Primary Key"
        tests:
          - unique
          - not_null
      
      - name: name
        description: "Counterparty name"
        tests:
          - unique
          - not_null
      
      - name: type
        description: "Type of counterparty (e.g., BANK, LENDER, AGENT)"
      
      - name: country_code
        description: "Country code for the counterparty - Foreign Key to dim_countries"
        tests:
          - relationships:
              to: ref('dim_countries')
              field: country_iso2_code
      
      - name: created_at
        description: "Timestamp when the counterparty record was created"
      
      - name: updated_at
        description: "Timestamp when the counterparty record was last updated"
